<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="docstyle.css" type="text/css">
<script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});
</script><script type="text/javascript"
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Dls.ArrayDenseMatrix.html">
<link rel="next" href="Dls.ArrayBandMatrix.html">
<link rel="Up" href="Dls.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Sundials" rel="Chapter" href="Sundials.html">
<link title="Nvector" rel="Chapter" href="Nvector.html">
<link title="Dls" rel="Chapter" href="Dls.html">
<link title="Sls" rel="Chapter" href="Sls.html">
<link title="Spils" rel="Chapter" href="Spils.html">
<link title="Nvector_custom" rel="Chapter" href="Nvector_custom.html">
<link title="Nvector_array" rel="Chapter" href="Nvector_array.html">
<link title="Nvector_serial" rel="Chapter" href="Nvector_serial.html">
<link title="Cvode" rel="Chapter" href="Cvode.html">
<link title="Kinsol" rel="Chapter" href="Kinsol.html">
<link title="Ida" rel="Chapter" href="Ida.html">
<link title="Arkode" rel="Chapter" href="Arkode.html">
<link title="Cvodes" rel="Chapter" href="Cvodes.html">
<link title="Idas" rel="Chapter" href="Idas.html">
<link title="Nvector_parallel" rel="Chapter" href="Nvector_parallel.html">
<link title="Kinsol_bbd" rel="Chapter" href="Kinsol_bbd.html">
<link title="Arkode_bbd" rel="Chapter" href="Arkode_bbd.html">
<link title="Cvode_bbd" rel="Chapter" href="Cvode_bbd.html">
<link title="Cvodes_bbd" rel="Chapter" href="Cvodes_bbd.html">
<link title="Ida_bbd" rel="Chapter" href="Ida_bbd.html">
<link title="Idas_bbd" rel="Chapter" href="Idas_bbd.html">
<link title="Nvector_openmp" rel="Chapter" href="Nvector_openmp.html">
<link title="Nvector_pthreads" rel="Chapter" href="Nvector_pthreads.html"><link title="Basic access" rel="Section" href="#4_Basicaccess">
<link title="Calculations" rel="Section" href="#4_Calculations">
<link title="Low-level details" rel="Section" href="#4_Lowleveldetails">
<title>Sundials/ML 2.7.0p0 : Dls.BandMatrix</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Dls.ArrayDenseMatrix.html" title="Dls.ArrayDenseMatrix">Previous</a>
&nbsp;<a class="up" href="Dls.html" title="Dls">Up</a>
&nbsp;<a class="post" href="Dls.ArrayBandMatrix.html" title="Dls.ArrayBandMatrix">Next</a>
</div>
<h1>Module <a href="type_Dls.BandMatrix.html">Dls.BandMatrix</a></h1>

<pre><span class="keyword">module</span> BandMatrix: <code class="code"><span class="keyword">sig</span></code> <a href="Dls.BandMatrix.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
Band matrices as passed to callback functions.<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#ss:band">The BAND Module</a></div></div>
<hr width="100%">

<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> = <code class="type">Dls_impl.BandTypes.t</code> </pre>
<div class="info ">
An abstract band matrix. Values of this type are typically passed
        to linear solver callback functions (like <a href="Cvode.Dls.html#TYPEband_jac_fn"><code class="code"><span class="constructor">Cvode</span>.<span class="constructor">Dls</span>.band_jac_fn</code></a>, 
        <a href="Ida.Dls.html#TYPEband_jac_fn"><code class="code"><span class="constructor">Ida</span>.<span class="constructor">Dls</span>.band_jac_fn</code></a>, and <a href="Kinsol.Dls.html#TYPEband_jac_fn"><code class="code"><span class="constructor">Kinsol</span>.<span class="constructor">Dls</span>.band_jac_fn</code></a>), in which case
        their lifetimes are determined by the underlying library and they
        should only be used within the callback to avoid the
        <a href="Dls.BandMatrix.html#EXCEPTIONInvalidated">Invalidated</a> exception.<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#s:dls"> Type DlsMat</a></div></div>


<pre><code><span id="TYPEdimensions"><span class="keyword">type</span> <code class="type"></code>dimensions</span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdimensions.n">n</span>&nbsp;: <code class="type">int</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Matrix size: <code class="code">n</code> by <code class="code">n</code>.<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdimensions.mu">mu</span>&nbsp;: <code class="type">int</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Upper bandwidth.<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdimensions.smu">smu</span>&nbsp;: <code class="type">int</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Storage upper bandwidth.<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdimensions.ml">ml</span>&nbsp;: <code class="type">int</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Lower bandwidth.<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>
}

<div class="info ">
Band matrix dimensions. If the result will not be LU factored then
        $\mathtt{smu} = \mathtt{mu}$ , otherwise
        $\mathtt{smu} = \min(\mathtt{n}-1, \mathtt{mu} + \mathtt{ml})$ .
        The extra space is used to store U after a call to <a href="Dls.BandMatrix.html#VALgbtrf"><code class="code"><span class="constructor">Dls</span>.<span class="constructor">BandMatrix</span>.gbtrf</code></a>.<br>
</div>

<br>
<h4 id="4_Basicaccess">Basic access</h4><br>

<pre><span id="VALmake"><span class="keyword">val</span> make</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEdimensions">dimensions</a> -> float -> <a href="Dls.BandMatrix.html#TYPEt">t</a></code></pre><div class="info ">
Returns a band matrix with the given <a href="Dls.BandMatrix.html#TYPEdimensions"><code class="code"><span class="constructor">Dls</span>.<span class="constructor">BandMatrix</span>.dimensions</code></a> and all elements
        initialized to the given value.<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#ss:band">NewBandMat</a></div></div>

<pre><span id="VALcreate"><span class="keyword">val</span> create</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEdimensions">dimensions</a> -> <a href="Dls.BandMatrix.html#TYPEt">t</a></code></pre><div class="info ">
Returns an uninitialized band matrix with the given <a href="Dls.BandMatrix.html#TYPEdimensions"><code class="code"><span class="constructor">Dls</span>.<span class="constructor">BandMatrix</span>.dimensions</code></a>.<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#ss:band">NewBandMat</a></div></div>

<pre><span id="VALsize"><span class="keyword">val</span> size</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">t</a> -> <a href="Dls.BandMatrix.html#TYPEdimensions">dimensions</a></code></pre><div class="info ">
Returns the dimensions of a band matrix.<br>
</div>

<pre><span id="VALprint"><span class="keyword">val</span> print</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Prints a band matrix to stdout.<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#ss:band">PrintMat</a></div></div>

<pre><span id="VALpp"><span class="keyword">val</span> pp</span> : <code class="type">Format.formatter -> <a href="Dls.BandMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Pretty-print a band matrix using the
        <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Format.html"> Format</a> module.<br>
</div>

<pre><span id="VALppi"><span class="keyword">val</span> ppi</span> : <code class="type">?start:string -><br>       ?stop:string -><br>       ?rowsep:string -><br>       ?indent:int -><br>       ?sep:string -><br>       ?empty:string -><br>       ?item:(Format.formatter -> int -> int -> float -> unit) -><br>       Format.formatter -> <a href="Dls.BandMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Pretty-print a band matrix using the
        <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Format.html"> Format</a> module.
        The defaults are: <code class="code">start=<span class="string">"["</span></code>, <code class="code">stop=<span class="string">"]"</span></code>, <code class="code">rowsep=<span class="string">";"</span></code>,
        <code class="code">indent=4</code>, <code class="code">sep=<span class="string">" "</span></code>, <code class="code">empty=<span class="string">"~"</span></code> and
        <code class="code">item=<span class="keyword">fun</span> f r c<span class="keywordsign">-&gt;</span><span class="constructor">Format</span>.fprintf f <span class="string">"(%2d,%2d)=% -15e"</span> r c</code> (see
        <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Format.html#VALfprintf"> fprintf</a>).
        The <code class="code">indent</code> argument specifies the indent for wrapped rows.<br>
</div>

<pre><span id="VALget"><span class="keyword">val</span> get</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">t</a> -> int -> int -> float</code></pre><div class="info ">
<code class="code">get a i j</code> returns the value at row <code class="code">i</code> and column <code class="code">j</code> of <code class="code">a</code>.
        Only rows and columns satisfying
        $\mathtt{i} \leq \mathtt{j} + \mathtt{ml}$  and
        $\mathtt{j} \leq \mathtt{i} + \mathtt{smu}$  are valid.<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#s:dls">BAND_ELEM</a></div></div>

<pre><span id="VALset"><span class="keyword">val</span> set</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">t</a> -> int -> int -> float -> unit</code></pre><div class="info ">
<code class="code">set a i j v</code> sets the value at row <code class="code">i</code> and column <code class="code">j</code> of <code class="code">a</code> to <code class="code">v</code>.
        Only rows and columns satisfying
        $\mathtt{i} \leq \mathtt{j} + \mathtt{ml}$  and
        $\mathtt{j} \leq \mathtt{i} + \mathtt{smu}$  are valid.<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#s:dls">BAND_ELEM</a></div></div>

<pre><span id="VALupdate"><span class="keyword">val</span> update</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">t</a> -> int -> int -> (float -> float) -> unit</code></pre><div class="info ">
<code class="code">update a i j f</code> sets the value at row <code class="code">i</code> and column <code class="code">j</code> of <code class="code">a</code>
        to <code class="code">f v</code>. Only rows and columns satisfying
        $\mathtt{i} \leq \mathtt{j} + \mathtt{ml}$  and
        $\mathtt{j} \leq \mathtt{i} + \mathtt{smu}$  are valid.<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#s:dls">DENSE_ELEM</a></div></div>
<br>
<h4 id="4_Calculations">Calculations</h4><br>

<pre><span id="VALset_to_zero"><span class="keyword">val</span> set_to_zero</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Fills a matrix with zeros.<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#ss:band">SetToZero</a></div></div>

<pre><span id="VALadd_identity"><span class="keyword">val</span> add_identity</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Increment a square matrix by the identity matrix.<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#ss:band">AddIdentity</a></div></div>

<pre><span id="VALmatvec"><span class="keyword">val</span> matvec</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">t</a> -> x:<a href="Sundials.RealArray.html#TYPEt">Sundials.RealArray.t</a> -> y:<a href="Sundials.RealArray.html#TYPEt">Sundials.RealArray.t</a> -> unit</code></pre><div class="info ">
Compute the matrix-vector product $y = Ax$.<br>
<b>Since</b> 2.6.0<br>
<div class="sundials"><span class="seesundials">See sundials: </span>BandMatvec</div></div>

<pre><span id="VALblit"><span class="keyword">val</span> blit</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">t</a> -> <a href="Dls.BandMatrix.html#TYPEt">t</a> -> int -> int -> unit</code></pre><div class="info ">
<code class="code">blit src dst copymu copyml</code> copies the contents of <code class="code">src</code> into <code class="code">dst</code>.
        The bandwidth to copy is given by <code class="code">copy_mu</code> and <code class="code">copy_ml</code>. Both
        matrices must have the same size.<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#ss:band">BandCopy</a></div></div>

<pre><span id="VALscale"><span class="keyword">val</span> scale</span> : <code class="type">float -> <a href="Dls.BandMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Multiplies each element by a constant.<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#ss:band">BandScale</a></div></div>

<pre><span id="VALgbtrf"><span class="keyword">val</span> gbtrf</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">t</a> -> <a href="Sundials.LintArray.html#TYPEt">Sundials.LintArray.t</a> -> unit</code></pre><div class="info ">
<code class="code">gbtrf a p</code> performs the LU factorization of <code class="code">a</code> with partial pivoting
        according to <code class="code">p</code>. The values in <code class="code">a</code> are overwritten with those of the
        calculated L and U matrices. The diagonal belongs to U. The diagonal
        of L is all 1s. U may occupy elements up to bandwidth <code class="code">smu</code> (rather
        than to <code class="code">mu</code>).<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#ss:band">BandGBTRF</a></div></div>

<pre><span id="VALgbtrs"><span class="keyword">val</span> gbtrs</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">t</a> -> <a href="Sundials.LintArray.html#TYPEt">Sundials.LintArray.t</a> -> <a href="Sundials.RealArray.html#TYPEt">Sundials.RealArray.t</a> -> unit</code></pre><div class="info ">
<code class="code">gbtrs a p b</code> finds the solution of <code class="code">ax = b</code> using an LU factorization
        found by <a href="Dls.BandMatrix.html#VALgbtrf"><code class="code"><span class="constructor">Dls</span>.<span class="constructor">BandMatrix</span>.gbtrf</code></a>. Both <code class="code">p</code> and <code class="code">b</code> must have the same number of rows
        as <code class="code">a</code>.<br>
<div class="sundials cvode"><span class="seesundials">See sundials: </span><a href="https://computation.llnl.gov/casc/sundials/documentation/cv_guide/node9.html#ss:band">BandGBTRS</a></div></div>
<br>
<h4 id="4_Lowleveldetails">Low-level details</h4><br>

<pre><span id="EXCEPTIONInvalidated"><span class="keyword">exception</span> Invalidated</span></pre>
<div class="info ">
Raised on an attempt to access a value that has become invalid. Such
        values refer to matrices that no longer exist in the underlying
        library.<br>
</div>

<pre><span id="VALinvalidate"><span class="keyword">val</span> invalidate</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Called internally when the corresponding value in the underlying
        library ceases to exist.<br>
</div>

<pre><span id="VALunsafe_unwrap"><span class="keyword">val</span> unsafe_unwrap</span> : <code class="type"><a href="Dls.BandMatrix.html#TYPEt">t</a> -><br>       (float, Bigarray.float64_elt, Bigarray.c_layout) Bigarray.Array2.t</code></pre><div class="info ">
Potentially unsafe access to the underlying storage. This array
        <b>must</b> only be used when the underlying storage is valid, which
        will be the case in callbacks. The array is accessed column first
        (unlike in <a href="Dls.BandMatrix.html#VALget"><code class="code"><span class="constructor">Dls</span>.<span class="constructor">BandMatrix</span>.get</code></a>).<br>
</div>
</body></html>