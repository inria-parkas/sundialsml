<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="docstyle.css" type="text/css">
<script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});
</script><script type="text/javascript"
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Sundials_NonlinearSolver.html">
<link rel="next" href="Nvector_array.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Sundials_Index" rel="Chapter" href="Sundials_Index.html">
<link title="Sundials_Config" rel="Chapter" href="Sundials_Config.html">
<link title="Sundials_RealArray" rel="Chapter" href="Sundials_RealArray.html">
<link title="Sundials_RealArray2" rel="Chapter" href="Sundials_RealArray2.html">
<link title="Sundials_LintArray" rel="Chapter" href="Sundials_LintArray.html">
<link title="Sundials_Logfile" rel="Chapter" href="Sundials_Logfile.html">
<link title="Sundials" rel="Chapter" href="Sundials.html">
<link title="Nvector" rel="Chapter" href="Nvector.html">
<link title="Nvector_serial" rel="Chapter" href="Nvector_serial.html">
<link title="Sundials_Matrix" rel="Chapter" href="Sundials_Matrix.html">
<link title="Sundials_LinearSolver" rel="Chapter" href="Sundials_LinearSolver.html">
<link title="Sundials_NonlinearSolver" rel="Chapter" href="Sundials_NonlinearSolver.html">
<link title="Nvector_custom" rel="Chapter" href="Nvector_custom.html">
<link title="Nvector_array" rel="Chapter" href="Nvector_array.html">
<link title="Cvode" rel="Chapter" href="Cvode.html">
<link title="Kinsol" rel="Chapter" href="Kinsol.html">
<link title="Ida" rel="Chapter" href="Ida.html">
<link title="Arkode" rel="Chapter" href="Arkode.html">
<link title="Cvodes" rel="Chapter" href="Cvodes.html">
<link title="Idas" rel="Chapter" href="Idas.html">
<link title="Nvector_parallel" rel="Chapter" href="Nvector_parallel.html">
<link title="Kinsol_bbd" rel="Chapter" href="Kinsol_bbd.html">
<link title="Arkode_bbd" rel="Chapter" href="Arkode_bbd.html">
<link title="Cvode_bbd" rel="Chapter" href="Cvode_bbd.html">
<link title="Cvodes_bbd" rel="Chapter" href="Cvodes_bbd.html">
<link title="Ida_bbd" rel="Chapter" href="Ida_bbd.html">
<link title="Idas_bbd" rel="Chapter" href="Idas_bbd.html">
<link title="Nvector_openmp" rel="Chapter" href="Nvector_openmp.html"><title>Sundials/ML 4.1.0p0 : Nvector_custom</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Sundials_NonlinearSolver.html" title="Sundials_NonlinearSolver">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Nvector_array.html" title="Nvector_array">Next</a>
</div>
<h1>Module <a href="type_Nvector_custom.html">Nvector_custom</a></h1>

<pre><span id="MODULENvector_custom"><span class="keyword">module</span> Nvector_custom</span>: <code class="code"><span class="keyword">sig</span></code> <a href="Nvector_custom.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
<div class="info-desc">
<p>An interface for creating custom nvectors in OCaml.</p>
</div>
<ul class="info-attributes">
<div class="authors"><b>Author(s):</b> Timothy Bourke (Inria/ENS), Jun Inoue (Inria/ENS), Marc Pouzet (UPMC/ENS/Inria)</div>
<li><b>Version:</b> 4.1.0</li>
<div class="sundials cvode"><span class="seesundials">See sundials: </span>The NVECTOR Module</div></ul>
</div>
<hr width="100%">

<pre><span id="TYPEkind"><span class="keyword">type</span> <code class="type"></code>kind</span> </pre>
<div class="info ">
<div class="info-desc">
<p>Represents an nvector manipulated by operations written in OCaml. Note that
    such operations entail the additional runtime cost of an OCaml callback.</p>
</div>
</div>


<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type">'d</code> t</span> = <code class="type">('d, <a href="Nvector_custom.html#TYPEkind">kind</a>) <a href="Nvector.html#TYPEt">Nvector.t</a></code> </pre>
<div class="info ">
<div class="info-desc">
<p>The type scheme of custom nvectors.</p>
</div>
</div>


<pre><code><span id="TYPEnvector_ops"><span class="keyword">type</span> <code class="type">'d</code> nvector_ops</span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vcheck">n_vcheck</span>&nbsp;: <code class="type">'d -> 'd -> bool</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Returns <code class="code"><span class="keyword">true</span></code> if the vectors are compatible. See <a href="Nvector.html#VALcheck"><code class="code"><span class="constructor">Nvector</span>.check</code></a>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vclone">n_vclone</span>&nbsp;: <code class="type">'d -> 'd</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Creates a new, distinct vector from an existing one without
      necessarily copying the contents of the original vector.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vspace">n_vspace</span>&nbsp;: <code class="type">('d -> int * int) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>Returns storage requirements for one nvector <code class="code">(lrw,&nbsp;liw)</code>, where
      <code class="code">lrw</code> is the number of realtype words and <code class="code">liw</code> is the number of
      integer words .</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vlinearsum">n_vlinearsum</span>&nbsp;: <code class="type">float -> 'd -> float -> 'd -> 'd -> unit</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vlinearsum&nbsp;a&nbsp;x&nbsp;b&nbsp;y&nbsp;z</code> calculates <code class="code">z&nbsp;=&nbsp;ax&nbsp;+&nbsp;by</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vconst">n_vconst</span>&nbsp;: <code class="type">float -> 'd -> unit</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vconst&nbsp;c&nbsp;z</code> sets all of <code class="code">z</code> to <code class="code">c</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vprod">n_vprod</span>&nbsp;: <code class="type">'d -> 'd -> 'd -> unit</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vprod&nbsp;x&nbsp;y&nbsp;z</code> calculates <code class="code">z&nbsp;=&nbsp;x&nbsp;*&nbsp;y</code> (pointwise).</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vdiv">n_vdiv</span>&nbsp;: <code class="type">'d -> 'd -> 'd -> unit</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vdiv&nbsp;x&nbsp;y&nbsp;z</code> calculates <code class="code">z&nbsp;=&nbsp;x&nbsp;/&nbsp;y</code> (pointwise).</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vscale">n_vscale</span>&nbsp;: <code class="type">float -> 'd -> 'd -> unit</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vscale&nbsp;c&nbsp;x&nbsp;z</code> calculates <code class="code">z&nbsp;=&nbsp;c&nbsp;*.&nbsp;x</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vabs">n_vabs</span>&nbsp;: <code class="type">'d -> 'd -> unit</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vabs&nbsp;x&nbsp;z</code> calculates <code class="code">z&nbsp;=&nbsp;abs(x)</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vinv">n_vinv</span>&nbsp;: <code class="type">'d -> 'd -> unit</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vinv&nbsp;x&nbsp;z</code> calculates <code class="code">z&nbsp;=&nbsp;1/x</code> (pointwise).</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vaddconst">n_vaddconst</span>&nbsp;: <code class="type">'d -> float -> 'd -> unit</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vaddconst&nbsp;x&nbsp;b&nbsp;z</code> calculates <code class="code">z&nbsp;=&nbsp;x&nbsp;+&nbsp;b</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vmaxnorm">n_vmaxnorm</span>&nbsp;: <code class="type">'d -> float</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vmaxnorm&nbsp;x</code> returns the maximum absolute value in x.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vwrmsnorm">n_vwrmsnorm</span>&nbsp;: <code class="type">'d -> 'd -> float</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vwrmsnorm&nbsp;x&nbsp;w</code> returns the weighted root-mean-square norm of <code class="code">x</code>
      with weight vector <code class="code">w</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vmin">n_vmin</span>&nbsp;: <code class="type">'d -> float</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vmin&nbsp;x</code> returns the smallest element in <code class="code">x</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vdotprod">n_vdotprod</span>&nbsp;: <code class="type">'d -> 'd -> float</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vdotprod&nbsp;x&nbsp;y</code> returns the dot product of <code class="code">x</code> and <code class="code">y</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vcompare">n_vcompare</span>&nbsp;: <code class="type">float -> 'd -> 'd -> unit</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vcompare&nbsp;c&nbsp;x&nbsp;z</code> calculates <code class="code">z(i)&nbsp;=&nbsp;<span class="keyword">if</span>&nbsp;abs&nbsp;x(i)&nbsp;&gt;=&nbsp;c&nbsp;<span class="keyword">then</span>&nbsp;1&nbsp;<span class="keyword">else</span>&nbsp;0</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vinvtest">n_vinvtest</span>&nbsp;: <code class="type">'d -> 'd -> bool</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vinvtest&nbsp;x&nbsp;z</code> calculates <code class="code">z(i)&nbsp;=&nbsp;1&nbsp;/&nbsp;x(i)</code> with prior testing for
      zero values. This routine must return <code class="code"><span class="keyword">true</span></code> if all components of <code class="code">x</code> are
      nonzero (successful inversion) and <code class="code"><span class="keyword">false</span></code> otherwise (not all elements
      inverted).</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vwl2norm">n_vwl2norm</span>&nbsp;: <code class="type">('d -> 'd -> float) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">m&nbsp;=&nbsp;n_vwl2norm&nbsp;x&nbsp;w</code> returns the weighted Euclidean l_2 norm of <code class="code">x</code>
      with weight vector <code class="code">w</code>, i.e.,
      $m = \sqrt{\sum_{i=0}^{n-1}(\mathtt{x}_i\mathtt{w}_i)}$ .</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vl1norm">n_vl1norm</span>&nbsp;: <code class="type">('d -> float) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vl1norm&nbsp;x</code> returns the l1 norm of <code class="code">x</code>, i.e.,
         $\sum_{i=0}^{n-1}\lvert\mathtt{x}_i\rvert$ .</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vwrmsnormmask">n_vwrmsnormmask</span>&nbsp;: <code class="type">('d -> 'd -> 'd -> float) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vmaxnormmask&nbsp;x&nbsp;w&nbsp;id</code> returns the weighted root-mean-square norm
      of <code class="code">x</code> using only elements where the corresponding <code class="code">id</code> is non-zero.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vconstrmask">n_vconstrmask</span>&nbsp;: <code class="type">('d -> 'd -> 'd -> bool) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vconstrmask&nbsp;c&nbsp;x&nbsp;m</code> calculates <code class="code">m(i)&nbsp;=&nbsp;<span class="constructor">Pi</span>&nbsp;x(i)</code> returning the
      conjunction. The value of <code class="code"><span class="constructor">Pi</span></code> depends on <code class="code">c(i)</code>: <code class="code">2:&nbsp;x(i)&nbsp;&gt;&nbsp;0</code>,
      <code class="code">1:&nbsp;x(i)&nbsp;&gt;=&nbsp;0</code>, <code class="code">0:&nbsp;<span class="keyword">true</span></code>, <code class="code">-1:&nbsp;x(i)&nbsp;&lt;=&nbsp;0</code>, and <code class="code">-2:&nbsp;x(i)&nbsp;&lt;&nbsp;0</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vminquotient">n_vminquotient</span>&nbsp;: <code class="type">('d -> 'd -> float) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vminquotient&nbsp;num&nbsp;denom</code> returns the minimum of <code class="code">num(i)&nbsp;/&nbsp;denom(i)</code>.
      Zero <code class="code">denom</code> elements are skipped. If no such quotients are found,
      then <a href="Sundials_Config.html#VALbig_real">Config.big_real</a> is returned.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vlinearcombination">n_vlinearcombination</span>&nbsp;: <code class="type">(Sundials.RealArray.t -> 'd array -> 'd -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vlinearcombination&nbsp;c&nbsp;x&nbsp;z</code> calculates
      <code class="code">z(i)&nbsp;=&nbsp;c(0)*x(0)(i)&nbsp;+&nbsp;...&nbsp;+&nbsp;c(nv-1)*x(nv-1)(i)</code> for the <code class="code">nv</code> elements
      of <code class="code">c</code> and <code class="code">x</code>, where <code class="code">i</code> ranges over the nvector elements.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vscaleaddmulti">n_vscaleaddmulti</span>&nbsp;: <code class="type">(Sundials.RealArray.t -> 'd -> 'd array -> 'd array -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vscaleaddmulti&nbsp;c&nbsp;x&nbsp;y&nbsp;z</code> calculates
      <code class="code">z(j)(i)&nbsp;=&nbsp;c(j)*x(i)&nbsp;+&nbsp;y(j)(i)</code>, where <code class="code">j</code> ranges over the array
      elements, and <code class="code">i</code> ranges over the nvector elements.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vdotprodmulti">n_vdotprodmulti</span>&nbsp;: <code class="type">('d -> 'd array -> Sundials.RealArray.t -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vdotprodmulti&nbsp;x&nbsp;y&nbsp;d</code> calculates
      <code class="code">d(j)&nbsp;=&nbsp;x(0)*y(j)(0)&nbsp;+&nbsp;...&nbsp;+&nbsp;x(n-1)*y(j)(n-1)</code> for the <code class="code">n</code> elements in
      the nvectors and where <code class="code">j</code> ranges over the array elements.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vlinearsumvectorarray">n_vlinearsumvectorarray</span>&nbsp;: <code class="type">(float -> 'd array -> float -> 'd array -> 'd array -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vlinearsumvectorarray&nbsp;a&nbsp;x&nbsp;b&nbsp;y&nbsp;z</code> calculates
      <code class="code">z(j)(i)&nbsp;=&nbsp;a*x(j)(i)&nbsp;+&nbsp;b*y(j)(i)</code>, where <code class="code">j</code> ranges over the array
      elements and <code class="code">i</code> ranges over the nvector elements.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vscalevectorarray">n_vscalevectorarray</span>&nbsp;: <code class="type">(Sundials.RealArray.t -> 'd array -> 'd array -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vscalevectorarray&nbsp;c&nbsp;x&nbsp;z</code> calculates <code class="code">z(j)(i)&nbsp;=&nbsp;c(j)*x(j)(i)</code>,
      where <code class="code">j</code> ranges over the array elements and <code class="code">i</code> ranges over the nvector
      elements.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vconstvectorarray">n_vconstvectorarray</span>&nbsp;: <code class="type">(float -> 'd array -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vconstvectorarray&nbsp;c&nbsp;x</code> sets <code class="code">z(j)(i)&nbsp;=&nbsp;c</code>,
      where <code class="code">j</code> ranges over the array elements and <code class="code">i</code> ranges over the
      nvector elements.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vwrmsnormvectorarray">n_vwrmsnormvectorarray</span>&nbsp;: <code class="type">('d array -> 'd array -> Sundials.RealArray.t -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vwrmsnormvectorarray&nbsp;x&nbsp;w&nbsp;m</code> calculates
      <code class="code">m(j)&nbsp;=&nbsp;sqrt(((x(j)(0)*w(j)(0))^2&nbsp;+&nbsp;...&nbsp;+&nbsp;(x(j)(n-1)*w(j)(n-1))^2)/n)</code>
      for the <code class="code">n</code> elements in the nvectors and where <code class="code">j</code> ranges over the array
      elements.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vwrmsnormmaskvectorarray">n_vwrmsnormmaskvectorarray</span>&nbsp;: <code class="type">('d array -> 'd array -> 'd -> Sundials.RealArray.t -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vwrmsnormvectorarray&nbsp;x&nbsp;w&nbsp;id&nbsp;m</code> calculates
      <code class="code">m(j)&nbsp;=&nbsp;sqrt(((x(j)(0)*w(j)(0)*<span class="constructor">H</span>(id(o)))^2&nbsp;+&nbsp;...&nbsp;+&nbsp;(x(j)(n-1)*w(j)(n-1)*<span class="constructor">H</span>(id(n-1))^2)/n)</code>
      for the <code class="code">n</code> elements in the nvectors, where <code class="code">j</code> ranges over the array
      elements, and where <code class="code"><span class="constructor">H</span>(x)&nbsp;=&nbsp;<span class="keyword">if</span>&nbsp;x&nbsp;&gt;&nbsp;0&nbsp;<span class="keyword">then</span>&nbsp;1.&nbsp;<span class="keyword">else</span>&nbsp;0</code>.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vscaleaddmultivectorarray">n_vscaleaddmultivectorarray</span>&nbsp;: <code class="type">(Sundials.RealArray.t -> 'd array -> 'd array array -> 'd array array -> unit)<br>       option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vscaleaddmultivectorarray&nbsp;a&nbsp;x&nbsp;yy&nbsp;zz</code> calculates
      <code class="code">zz(j)(k)(i)&nbsp;=&nbsp;a(k)*x(k)(i)&nbsp;+&nbsp;yy(j)(k)(i)</code> where <code class="code">j</code> and <code class="code">k</code> range over
      the arrays and <code class="code">i</code> ranges over the nvector elements.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTnvector_ops.n_vlinearcombinationvectorarray">n_vlinearcombinationvectorarray</span>&nbsp;: <code class="type">(Sundials.RealArray.t -> 'd array array -> 'd array -> unit) option</code>;</code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p><code class="code">n_vlinearcombinationvectorarray&nbsp;c&nbsp;xx&nbsp;z</code> calculates
      <code class="code">z(k)(i)&nbsp;=&nbsp;c(0)*x(0)(k)(i)&nbsp;+&nbsp;...&nbsp;+&nbsp;c(ns)*x(ns)(k)(i)</code> where <code class="code">k</code> ranges
      over the array elements, <code class="code">ns</code> is the number of arrays in <code class="code">xx</code>, and
      <code class="code">i</code> ranges over the nvector elements.</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>
<code>}</code>

<div class="info ">
<div class="info-desc">
<p>The set of operations required to define an nvector. Some operations
    are optional; default values are either provided by the OCaml interface
    or the Sundials library.</p>

<p>Custom nvectors' payloads and operations must not hold any
    reference that loops back to the enclosing nvector. Such loops
    will not be properly garbage collected.</p>

<p>Nvector operations are not allowed to throw exceptions, as they
    cannot be propagated reliably.  Uncaught exceptions will be
    discarded with a warning.</p>

<p>Note that the fused and array custom nvector operations currently
    reallocate fresh arrays at each call. There is thus a tradeoff between
    the speed advantages of providing a single callback that handles many
    values at once but allocates more heap memory and multiple callbacks.</p>
</div>
<ul class="info-attributes">
<div class="sundials cvode"><span class="seesundials">See sundials: </span>_generic_N_Vector_Ops</div></ul>
</div>


<pre><span id="VALmake_wrap"><span class="keyword">val</span> make_wrap</span> : <code class="type">'d <a href="Nvector_custom.html#TYPEnvector_ops">nvector_ops</a> -><br>       ?with_fused_ops:bool -> 'd -> 'd <a href="Nvector_custom.html#TYPEt">t</a></code></pre><div class="info ">
<div class="info-desc">
<p>Instantiation of custom nvectors.
    <code class="code">make_wrap&nbsp;ops</code> takes set a set of operations on the data
    type <code class="code"><span class="keywordsign">'</span>d</code> and yields a function for lifting values of type <code class="code"><span class="keywordsign">'</span>d</code>
    into <code class="code"><span class="keywordsign">'</span>d</code> nvectors which can be passed to a solver.</p>
</div>
</div>

<pre><span id="VALadd_tracing"><span class="keyword">val</span> add_tracing</span> : <code class="type">string -> 'd <a href="Nvector_custom.html#TYPEnvector_ops">nvector_ops</a> -> 'd <a href="Nvector_custom.html#TYPEnvector_ops">nvector_ops</a></code></pre><div class="info ">
<div class="info-desc">
<p>Add tracing to custom operations.
    <code class="code">add_tracing&nbsp;p&nbsp;ops</code> modifies a set of <a href="Nvector_custom.html#TYPEnvector_ops"><code class="code"><span class="constructor">Nvector_custom</span>.nvector_ops</code></a> so that
    a message, prefixed by <code class="code">p</code>, is printed each time an operation
    is called. This function is intended to help debug sets of
    vector operations.</p>
</div>
</div>

<pre><span id="VALenable"><span class="keyword">val</span> enable</span> : <code class="type">?with_fused_ops:bool -><br>       ?with_linear_combination:bool -><br>       ?with_scale_add_multi:bool -><br>       ?with_dot_prod_multi:bool -><br>       ?with_linear_sum_vector_array:bool -><br>       ?with_scale_vector_array:bool -><br>       ?with_const_vector_array:bool -><br>       ?with_wrms_norm_vector_array:bool -><br>       ?with_wrms_norm_mask_vector_array:bool -><br>       ?with_scale_add_multi_vector_array:bool -><br>       ?with_linear_combination_vector_array:bool -> 'd <a href="Nvector_custom.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
<div class="info-desc">
<p>Selectively enable or disable fused and array operations.
    The <code class="code">with_fused_ops</code> argument enables or disables all such operations.</p>
</div>
<ul class="info-attributes">
<li><b>Since</b> 4.0.0</li>
<div class="raisedexceptions"><span class="raises">Raises</span><ul><li><code>OperationNotSupported</code> The requested functionality has not been provided.</li>
<li><code>Config.NotImplementedBySundialsVersion</code> Fused and array operations not available.</li>
</ul></div>
<div class="sundials cvode"><span class="seesundials">See sundials: </span>N_VEnableFusedOps_Serial</div><div class="sundials cvode"><span class="seesundials">See sundials: </span>N_VEnableLinearCombination_Serial</div><div class="sundials cvode"><span class="seesundials">See sundials: </span>N_VEnableScaleAddMulti_Serial</div><div class="sundials cvode"><span class="seesundials">See sundials: </span>N_VEnableDotProdMulti_Serial</div><div class="sundials cvode"><span class="seesundials">See sundials: </span>N_VEnableLinearSumVectorArray_Serial</div><div class="sundials cvode"><span class="seesundials">See sundials: </span>N_VEnableScaleVectorArray_Serial</div><div class="sundials cvode"><span class="seesundials">See sundials: </span>N_VEnableConstVectorArray_Serial</div><div class="sundials cvode"><span class="seesundials">See sundials: </span>N_VEnableWrmsNormVectorArray_Serial</div><div class="sundials cvode"><span class="seesundials">See sundials: </span>N_VEnableWrmsNormMaskVectorArray_Serial</div><div class="sundials cvode"><span class="seesundials">See sundials: </span>N_VEnableScaleAddMultiVectorArray_Serial</div><div class="sundials cvode"><span class="seesundials">See sundials: </span>N_VEnableLinearCombinationVectorArray_Serial</div></ul>
</div>

<pre><span id="EXCEPTIONOperationNotSupported"><span class="keyword">exception</span> OperationNotSupported</span></pre>
<div class="info ">
<div class="info-desc">
<p>Thrown for operations not provided to <a href="Nvector_custom.MakeOps.html"><code class="code"><span class="constructor">Nvector_custom</span>.<span class="constructor">MakeOps</span></code></a></p>
</div>
</div>

<pre><span id="MODULEMakeOps"><span class="keyword">module</span> <a href="Nvector_custom.MakeOps.html">MakeOps</a></span> <code class="code">(</code><code class="code"><span class="constructor">A</span></code><code class="code">&nbsp;:&nbsp;</code><code class="code"><span class="keyword">sig</span></code></pre><div class="sig_block">
<pre><span id="TYPEdata"><span class="keyword">type</span> <code class="type"></code>data</span> </pre>


<pre><span id="VALops"><span class="keyword">val</span> ops</span> : <code class="type">data <a href="Nvector_custom.html#TYPEnvector_ops">Nvector_custom.nvector_ops</a></code></pre></div><pre><code class="code"><span class="keyword">end</span></code><code class="code">)&nbsp;</code>: <code class="type"><a href="Nvector.NVECTOR.html">Nvector.NVECTOR</a></code><code class="type">  with type data = A.data
                           and type kind = kind</code></pre><div class="info">
<p>Turn a set of <a href="Nvector_custom.html#TYPEnvector_ops"><code class="code"><span class="constructor">Nvector_custom</span>.nvector_ops</code></a> into an nvector module.</p>

</div>
</body></html>
